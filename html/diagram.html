<html>

<head>
    <style>
        #cy {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>

<body>
    <div style="display: none" id="models">${models}</div>
    <div id="cy"></div>
    <script src="${rootPath}/node_modules/cytoscape/dist/cytoscape.js"></script>
    <script src="${rootPath}/node_modules/jquery/dist/jquery.min.js"></script>
    <script>
        function run() {
            var cy = cytoscape({
                container: $('#cy'),
                elements: JSON.parse($('#models').html()),

                boxSelectionEnabled: false,
                autounselectify: true,

                style: cytoscape.stylesheet()
                    .selector('node')
                    .css({
                        'content': 'data(name)',
                        'text-valign': 'center',
                        'color': 'white',
                        'text-outline-width': 2,
                        'background-color': 'blue',
                        'text-outline-color': 'black'
                    })
                    .selector('edge')
                    .css({
                        'curve-style': 'bezier',
                        'target-arrow-shape': 'triangle',
                        'target-arrow-color': '#ccc',
                        'line-color': '#ccc',
                        'width': 1
                    })
                    .selector(':selected')
                    .css({
                        'background-color': 'black',
                        'line-color': 'black',
                        'target-arrow-color': 'black',
                        'source-arrow-color': 'black'
                    })
                    .selector('.faded')
                    .css({
                        'opacity': 0.25,
                        'text-opacity': 0
                    }),

                layout: {
                    name: 'cose',
                    randomize: false,
                },
                
                // layout: {
                //     name: 'breadthfirst',
                //     fit: true, // whether to fit the viewport to the graph
                //     directed: false, // whether the tree is directed downwards (or edges can point in any direction if false)
                //     padding: 30, // padding on fit
                //     circle: true, // put depths in concentric circles if true, put depths top down if false
                //     spacingFactor: 1.75, // positive spacing factor, larger => more space between nodes (N.B. n/a if causes overlap)
                //     boundingBox: undefined, // constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }
                //     avoidOverlap: true, // prevents node overlap, may overflow boundingBox if not enough space
                //     nodeDimensionsIncludeLabels: false, // Excludes the label when calculating node bounding boxes for the layout algorithm
                //     roots: undefined, // the roots of the trees
                //     maximalAdjustments: 0, // how many times to try to position the nodes in a maximal way (i.e. no backtracking)
                //     animate: false, // whether to transition the node positions
                //     animationDuration: 500, // duration of animation in ms if enabled
                //     animationEasing: undefined, // easing of animation if enabled
                //     ready: undefined, // callback on layoutready
                //     stop: undefined // callback on layoutstop
                // },
            });
        }
        setTimeout(run, 0);
    </script>
</body>

</html>